webpackJsonp([9],{"+Mi+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Dd8w"),i=n.n(a),o=n("M4fF"),l=n.n(o),s=n("NYxO"),c={name:"connections",components:{},data:function(){return{loading:!1}},mounted:function(){this.init()},computed:i()({},Object(s.c)(["connection"]),Object(s.c)("pulse",["pulses"])),methods:i()({},Object(s.b)("pulse",["setActive","remove"]),{onPusleActiveChange:function(e,t){var n=this;this.loading=!0,this.setActive({id:e,active:t}).then(function(e){n.loading=!1}).catch(function(e){n.loading=!1})},init:function(){},onCreate:function(){this.$emit("create")},onEdit:function(e){this.$emit("edit",e)},onDelete:function(e){var t=this;this.$confirm("This will permanently delete "+e.name+". Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){var n=e.id;t.mask=!0,t.remove({id:n})})}})},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticStyle:{"padding-bottom":"20px"}},[n("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-bottom":"40px"},attrs:{span:12,push:6}},[e._l(e.pulses,function(t){return n("el-card",{key:t.id,staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(t.name))]),n("el-button",{staticStyle:{float:"right","margin-left":"5px"},attrs:{circle:"circle",icon:"el-icon-edit"},on:{click:function(n){e.onEdit(t)}}}),n("el-button",{staticStyle:{float:"right"},attrs:{circle:"circle",icon:"el-icon-delete",type:"danger",plain:"plain"},on:{click:function(n){e.onDelete(t)}}})],1),n("div",{staticClass:"bottom clearfix"},[n("el-row",[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"left"},[n("span",{staticClass:"url",staticStyle:{"margin-top":"5px"},attrs:{type:"text"}},[e._v(e._s(t._pulseType))])])]),n("el-col",{attrs:{span:12}},[n("el-switch",{staticClass:"active",on:{change:function(n){e.onPusleActiveChange(t.id,n)}},model:{value:t.active,callback:function(n){e.$set(t,"active",n)},expression:"item.active"}})],1)],1)],1)])}),n("el-card",{staticStyle:{"margin-top":"20px"},attrs:{shadow:"never"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"success",plain:"plain"},on:{click:e.onCreate}},[e._v("Create pulse")])],1)],2)],1)},staticRenderFns:[]};var d=n("VU/8")(c,r,!1,function(e){n("DKN8")},"data-v-634d6415",null).exports,u=n("mvHQ"),p=n.n(u),m={props:{data:{type:Object,required:!1,default:function(){}}},data:function(){return{loading:!1,plans:[],pulseTypes:[{value:"LOAD_PLAN_ERROR",label:"Load plan error",disabled:!1},{value:"LOAD_PLAN_DURATION",label:"Load plan duration",disabled:!0},{value:"AGENT_DOWN",label:"Agent down",disabled:!0}],form:{id:void 0,active:!0,username:name,pulseType:"LOAD_PLAN_ERROR",loadPlans:[]},rules:{name:[{required:!0,trigger:"blur",message:"Name is required"}],pulseType:[{required:!0,trigger:"blur",message:"Pulse type is required"}],loadPlans:[{required:!0,trigger:"blur",message:"Load plan is required"}]},options:[]}},computed:i()({},Object(s.c)(["connection"]),Object(s.c)("loadPlan",{loadPlans:"all"})),methods:i()({},Object(s.b)("pulse",{createPulse:"create",updatePulse:"update"}),Object(s.b)("loadPlan",{findAllLoadPlans:"findAll"}),{create:function(){var e=this,t=this.connection.id,n=this.form.active,a=this.form.name,i=this.form.pulseType,o=void 0;switch(i){case"LOAD_PLAN_ERROR":o=p()(this.form.loadPlans)}var l={active:n,name:a,pulseType:i,content:o};this.loading=!0,this.createPulse({connectionId:t,data:l}).then(function(t){e.loading=!1,e.$emit("close")},function(t){e.loading=!1})},update:function(){var e=this,t=this.connection.id,n=this.form.active,a=this.form.name,i=this.form.pulseType,o=void 0;switch(i){case"LOAD_PLAN_ERROR":o=p()(this.form.loadPlans)}var l={active:n,name:a,pulseType:i,content:o};this.loading=!0,this.updatePulse({connectionId:t,data:l}).then(function(t){e.loading=!1,e.$emit("close")},function(t){e.loading=!1})},onSave:function(){this.loading=!0,this.form.id?this.update():this.create()},onClose:function(){this.$emit("close")},init:function(){var e=this;if(!l.a.isEmpty(this.data)){var t=JSON.parse(this.data.content);this.form=i()({},this.data,{loadPlans:t})}var n=this.connection.id;this.loading=!0,this.findAllLoadPlans({connectionId:n}).then(function(t){e.loading=!1,e.plans=t}).catch(function(t){e.loading=!1})}}),mounted:function(){this.init()}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container",attrs:{justify:"center"}},[n("el-col",{attrs:{span:12,push:6}},[e.form.system?n("el-alert",{attrs:{title:"System user",type:"warning","show-icon":"show-icon",closable:!1,description:"System user can not be deleted"}}):e._e(),n("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[n("el-form-item",{attrs:{label:"Active"}},[n("el-switch",{model:{value:e.form.active,callback:function(t){e.$set(e.form,"active",t)},expression:"form.active"}})],1),n("el-form-item",{attrs:{prop:"name",label:"Name"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!e.form.active},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{prop:"pulseType",label:"Type"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Select",disabled:!e.form.active},model:{value:e.form.pulseType,callback:function(t){e.$set(e.form,"pulseType",t)},expression:"form.pulseType"}},e._l(e.pulseTypes,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}))],1),n("el-form-item",{attrs:{prop:"loadPlans",label:"Load plans"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"Select load plan ...",disabled:!e.form.active},model:{value:e.form.loadPlans,callback:function(t){e.$set(e.form,"loadPlans",t)},expression:"form.loadPlans"}},e._l(e.plans,function(e){return n("el-option",{key:e.internalId,attrs:{label:e.name,value:e.internalId}})}))],1),n("el-form-item",{attrs:{prop:"mail",label:"Mail"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!e.form.active},model:{value:e.form.mail,callback:function(t){e.$set(e.form,"mail",t)},expression:"form.mail"}})],1),n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("Save")]),n("el-button",{attrs:{type:"danger",plain:"plain"},on:{click:e.onClose}},[e._v("Close")])],1)],1)],1)],1)},staticRenderFns:[]};var v={name:"dashboard-admin",components:{Pulses:d,Pulse:n("VU/8")(m,f,!1,function(e){n("rdfm")},"data-v-9cae72bc",null).exports},data:function(){return{loading:!1,pulse:{},component:void 0}},mounted:function(){this.init()},computed:i()({},Object(s.c)(["connection"]),Object(s.c)("pulse",["pulses"])),methods:i()({},Object(s.b)("pulse",["findAll"]),{onCreate:function(){this.component="pulse"},onEdit:function(e){this.component="pulse",this.pulse=e},init:function(){var e=this,t=this.connection.id;this.loading=!0,this.findAll({connectionId:t}).then(function(t){e.loading=!1,l.a.isEmpty(t)?e.component=void 0:e.component="pulses"}).catch(function(t){e.loading=!1,e.component=void 0})}})},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mailSettings-container",staticStyle:{padding:"40px 0"},attrs:{justify:"center"}},[n("el-col",{attrs:{span:16,push:4}},[e.component?e._e():n("div",{staticClass:"warn-content noConnection-container"},[n("svg-icon",{attrs:{"class-name":"pulse-icon","icon-class":"pulse"}}),n("span",{staticClass:"noConnection-text"},[e._v("You do not have any pulses")]),n("el-button",{staticClass:"create-button",attrs:{type:"primary"},on:{click:function(t){e.component="pulse"}}},[e._v("Create pulse")])],1)]),"pulse"===e.component?n("pulse",{attrs:{data:e.pulse},on:{close:e.init}}):e._e(),"pulses"===e.component?n("pulses",{on:{create:e.onCreate,edit:e.onEdit}}):e._e()],1)},staticRenderFns:[]};var g=n("VU/8")(v,h,!1,function(e){n("QwDa")},"data-v-19e552dc",null);t.default=g.exports},"0AVj":function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.container[data-v-9cae72bc] {\n  padding: 40px 0;\n}\n.el-checkbox-group[data-v-9cae72bc] {\n  width: 320px;\n}\n\n",""])},DKN8:function(e,t,n){var a=n("Qyla");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("02e1ebe2",a,!0)},QwDa:function(e,t,n){var a=n("zPMH");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("20d23e74",a,!0)},Qyla:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.url[data-v-634d6415] {\n    font-size: 15px;\n    color: #999;\n}\n.username[data-v-634d6415] {\n  padding: 0;\n  float: right;\n  color: #999;\n}\n.active[data-v-634d6415] {\n  float: right;\n  margin-left: 10px;\n}\n.left span[data-v-634d6415] {\n  display: block;\n}\n\n",""])},rdfm:function(e,t,n){var a=n("0AVj");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("575f29ba",a,!0)},zPMH:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.noConnection-text[data-v-19e552dc] {\n  color: gray;\n}\n.noConnection-container[data-v-19e552dc] {\n  width: 100%;\n  display: -webkit-inline-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n}\n.create-button[data-v-19e552dc] {\n  margin-left:auto;\n  margin-right:0;\n}\n.warn-content[data-v-19e552dc] {\n  background-color: #EAE9E1;\n  border-radius: 5px;\n}\n.pulse-icon[data-v-19e552dc] {\n  margin-right: 20px;\n  font-size: 24px;\n  color: gray;\n}\n\n",""])}});